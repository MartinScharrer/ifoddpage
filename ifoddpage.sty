%    \begin{macrocode}
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{ifoddpage}[2011/09/13 v1.0 Conditionals for odd/even page detection]
%    \end{macrocode}
%
%    \begin{macrocode}
\newcounter{checkoddpage}
%    \end{macrocode}
%
% \begin{macro}{\thecheckoddpage}
%    \begin{macrocode}
\def\thecheckoddpage{\number\c@checkoddpage}
%    \end{macrocode}
% \end{macro}
%
%    \begin{macrocode}
\newif\ifoddpage
\newif\iftwosideoddpage
\let\oddpage@checkpage\relax
%    \end{macrocode}
%
% \begin{macro}{\oddpage@page}
%    \begin{macrocode}
\def\oddpage@page{1}
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\oddpage@label}
%    \begin{macrocode}
\def\oddpage@label{%
    \@newl@bel{checkaddpage}%
}%
\immediate\write\@auxout{\noexpand\providecommand\noexpand\oddpage@label[2]{}}%
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\oddpage@checkpage}
%    \begin{macrocode}
\def\oddpage@checkpage{%
    \@bsphack
    \protected@write\@auxout{}%
        {\string\oddpage@label{\thecheckoddpage}{\the\c@page}}%
    \@esphack
}%
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\oddpage@page}
%    \begin{macrocode}
\def\oddpage@page{%
    \expandafter\ifx\csname checkoddpage@\thecheckoddpage\endcsname\relax
        \the\c@page
    \else
        \csname checkoddpage@\thecheckoddpage\endcsname
    \fi
}%
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\checkoddpage}
%    \begin{macrocode}
\DeclareRobustCommand\checkoddpage{%
    \stepcounter{checkoddpage}%
    \oddpage@checkpage
    \ifodd\oddpage@page\relax
        \oddpagetrue
        \twosideoddpagetrue
    \else
        \oddpagefalse
        \twosideoddpagefalse
    \fi
    \if@twoside\else
        \twosideoddpagetrue
    \fi
}%
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\@ifoddpage}
%    \begin{macrocode}
\def\@ifoddpage{%
    \ifoddside
        \expandafter\@firstoftwo
    \else
        \expandafter\@secondoftwo
    \fi
}
%    \end{macrocode}
% \end{macro}
%
%
% \begin{macro}{\@iftwosideoddpage}
%    \begin{macrocode}
\def\@iftwosideoddpage{%
    \iftwosideoddside
        \expandafter\@firstoftwo
    \else
        \expandafter\@secondoftwo
    \fi
}
%    \end{macrocode}
% \end{macro}
%
